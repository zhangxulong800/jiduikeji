{extend name="platform/base" /}
{block name="main"}
<section class="panel panel-default">
	<header class="panel-heading font-bold"> 修改文章分类</header>
	<div class="panel-body">
		<form class="form-horizontal" id="form" name="form" onsubmit="">
			<div class="form-group">
				<label class="col-sm-2 control-label">分类名称</label>
				<div class="col-md-4">
					<input type="text" class="form-control" id="name" value="{$info['name']}">
				</div>
			</div>
			<div class="line line-dashed line-lg pull-in"></div>
			<div class="form-group">
				<label class="col-sm-2 control-label">上级分类</label>
				<div class="col-sm-4">
					<select id="pid" name="account" class="form-control m-b">
						<option value="0">顶级分类</option> 
						 {volist name="article_class_frist_list" id="vo"}
							<option value="{$vo.class_id}" 
							{if condition="$info['pid'] eq $vo['class_id']"}selected{/if}
							>{$vo.name}</option>
					    {/volist}
					    
					</select>
				</div>
			</div>
			<div class="line line-dashed line-lg pull-in"></div>
			<div class="form-group">
				<label class="col-sm-2 control-label">排序</label>
				<div class="col-md-1">
					<input type="text" class="form-control" id="sort" value="{$info['sort']}">
				</div>
			</div>
			<div class="line line-dashed line-lg pull-in"></div>
			<div class="form-group">
				<div class="col-sm-4 col-sm-offset-2">
					<input type="hidden" id="class_id" value="{$info['class_id']}">
					<a href="javascript:void(0);" onclick="updateArticleClassAjax()" class="btn btn-primary">保存</a>
				</div>
			</div>
		</form>
	</div>
</section>
<script type="text/javascript">
/**
 * 添加分类
 */
function updateArticleClassAjax(){
		var class_id = $("#class_id").val();
		var name = $("#name").val();
		var pid = $("#pid").val();
		var sort = $("#sort").val();
		//verify(module_name, controller, method, url, sort, desc);
		$.ajax({
			type : "post",
			url : "PLATFORM_MAIN/Cms/addUpdateAritcleClass",
			data : {
				'class_id' : class_id,
				'name' : name,
				'pid' : pid,
				'sort' : sort,
			},
			async : true,
			success : function(data) {
				if (data["code"] > 0) {
					showMessage('success', "修改成功",'PLATFORM_MAIN/Cms/articleClassList');
				}else{
					showMessage('error', "修改失败");
				}	
			}
		});
}
</script>
{/block} 

